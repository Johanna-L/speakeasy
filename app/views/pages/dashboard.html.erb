<div class="container">
<div class="d-flex justify-content-between pt-3">

  <div>
    <h1 class="mb-3">Mon profil</h1>
    <p><strong>Nom: </strong><%= @user.first_name.capitalize %>
    <%= @user.last_name.upcase %></p>
    <p><strong>Email: </strong>
    <%= @user.email %></p>

    <% if @user.background %>
      <p><strong>Bio: </strong><%= @user.background %></p>
      <p><strong>Réseaux sociaux: </strong><%= @user.social_media %></p>
    <% end %>

    <% if @user.company_name %>
      <p><strong>Entreprise: </strong><%= @user.company_name %></p>
      <p><strong>Informations: </strong><%= @user.company_info %></p>
    <% end %>
  </div>
  <%= image_tag @user.photo, alt: "profile_pic", class:"rounded profile_pic", style:"width: 200px" %>

</div>

  <!-- For organizer -->
  <!-- For organizer -->
  <% if @upcoming_bookings.any? %>
  <h2 class="py-3">Mes réservations à venir</h2>
    <div class="d-flex justify-content-between align-items flex-start">
      <li class="card w-75">
        <div class="card-infos d-flex align-items">
          <div class ="text">
            <% @upcoming_bookings.each do |booking| %>
              <p><i class="fas fa-poll mr-2" style="color :#58ad87"></i> <strong><%= booking.date.strftime('%d/%m/%Y') %></strong></p>
              <p><i class="fas fa-map-marker-alt mr-3" style="color :#58ad87"> </i><%= booking.speaker_offering.topic.capitalize %></p>
              <p><i class="fas fa-search-plus mr-2" style="color :#58ad87"></i> <%= booking.speaker_offering.user.first_name.capitalize %> <%= booking.speaker_offering.user.last_name.upcase %></p>
              <p><i class="fas fa-tags mr-2" style="color :#58ad87"></i> <%= booking.speaker_offering.budget %> €</p>
            <% end %>
          </div>
        </div>
      </li>
    </div>
  <% end %>

  <% if @upcoming_bookings.any? %>
    <h2 class="pt-3">Mes réservations à venir</h2>
      <table class="table">
      <tr>
        <th>Date</th>
        <th>Titre</th>
        <th>Intervenant</th>
      </tr>

      <% @upcoming_bookings.each do |booking| %>
        <tr>
          <td><%= booking.date.strftime('%d/%m/%Y') %></td>
          <td><%= booking.speaker_offering.topic.capitalize %></td>
          <td><%= booking.speaker_offering.user.first_name.capitalize %>
              <%= booking.speaker_offering.user.last_name.upcase %>
          </td>
        </tr>
      <% end %>
    </table>
  <% end %>

  <% if @past_bookings.any? %>
  <h2 class="py-3">Mes réservations passées</h2>
    <div class="d-flex justify-content-between align-items flex-start">
      <li class="card w-75">
        <div class="card-infos d-flex align-items">
          <div class ="text">
            <% @upcoming_bookings.each do |booking| %>
              <p><i class="fas fa-poll mr-2" style="color :#58ad87"></i> <strong><%= booking.date.strftime('%d/%m/%Y') %></strong></p>
              <p><i class="fas fa-map-marker-alt mr-3" style="color :#58ad87"> </i><%= booking.speaker_offering.topic.capitalize %></p>
              <p><i class="fas fa-search-plus mr-2" style="color :#58ad87"></i> <%= booking.speaker_offering.user.first_name.capitalize %> <%= booking.speaker_offering.user.last_name.upcase %></p>
              <p><i class="fas fa-tags mr-2" style="color :#58ad87"></i> <%= booking.speaker_offering.budget %> €</p>
            <% end %>
          </div>
        </div>
      </li>
    </div>
  <% end %>

  <% if @past_bookings.any? %>
    <h2 class="py-3">Mes réservations passées</h2>
    <table class="table">
      <tr>
        <th>Date</th>
        <th>Titre</th>
        <th>Intervenant</th>
        <th>Rating</th>
        <th>Commentaire</th>
      </tr>

      <% @past_bookings.each do |booking| %>
        <tr>
          <td><%= booking.date.strftime('%d/%m/%Y') %></td>
          <td><%= booking.speaker_offering.topic.capitalize %></td>
          <td><%= booking.speaker_offering.user.first_name.capitalize %>
              <%= booking.speaker_offering.user.last_name.upcase %>
          </td>
          <% if booking.review.nil? %>
            <%= simple_form_for(booking) do |f| %>
              <td><%= f.input_field :rating, hint: '0 to 5' %></td>
              <td>
                <%= f.input_field :review, placeholder: 'Laissez un commentaire' %>
                <%= f.submit "Evaluer", class:'btn btn-success' %>
              </td>
            <% end %>
          <% else %>
            <td><%= booking.rating %></td>
            <td><%= booking.review %></td>
          <% end %>
        </tr>
      <% end %>
    </table>
  <% end %>

  <!-- For speaker -->
  <!-- For speaker -->

  <% if @upcoming_speaker_bookings.any? %>
    <h2 class="py-3">Mes interventions à venir</h2>
      <table class="table">
      <tr>
        <th>Date</th>
        <th>Titre</th>
        <th>Client</th>
      </tr>

      <% @upcoming_speaker_bookings.each do |booking| %>
        <tr>
          <td><%= booking.date %></td>
          <td><%= booking.speaker_offering.topic.capitalize %></td>
          <td><%= booking.user.first_name.capitalize %>
              <%= booking.user.last_name.upcase %>
          </td>
        </tr>
      <% end %>
      </table>
    <% end %>

  <% if @past_speaker_bookings.any? %>
    <h2 class="py-3">Mes interventions passées</h2>
    <table class="table">
      <tr>
        <th>Date</th>
        <th>Titre</th>
        <th>Client</th>
        <th>Rating</th>
        <th>Commentaire</th>
      </tr>

      <% @past_speaker_bookings.each do |booking| %>
        <tr>
          <td><%= booking.date %></td>
          <td><%= booking.speaker_offering.topic.capitalize %></td>
          <td><%= booking.user.first_name.capitalize %>
              <%=booking.user.last_name.upcase%></td>
          <td><%= booking.rating %></td>
          <td>
            <% if booking.review %>
              <%= booking.review %>
            <% else %>
              <%= booking.user.first_name.capitalize %>
              <%= "n'a pas laissé de commentaire" %>
            <% end %>
          </td>
        </tr>
      <% end %>
    </table>
  <% end %>

  <% if @user.speaker_offerings.any? %>
    <h2 class="py-3">Mon annonce</h2>
    <div class="d-flex justify-content-between align-items flex-start">
      <li class="card w-75">
        <div class="card-infos d-flex align-items">
          <div class ="text">
            <% @user.speaker_offerings.each do |offering| %>
              <p><i class="fas fa-poll mr-2" style="color :#58ad87"></i> <strong><%= offering.topic %></strong></p>
              <p><i class="fas fa-map-marker-alt mr-3" style="color :#58ad87"> </i><%= offering.localisation %></p>
              <p><i class="fas fa-search-plus mr-2" style="color :#58ad87"></i> <%= offering.description %></p>
              <p><i class="fas fa-tags mr-2" style="color :#58ad87"></i> <%= offering.budget %> €</p>
              <%= link_to "Modifier mon annonce", edit_speaker_offering_path(offering), class: "btn btn-success" %>
              <%= link_to "Retirer mon annonce", speaker_offering_path(offering), method: :delete, class: "btn btn-success" %>
            <% end %>
          </div>
        </div>
      </li>
    </div>
  <% end %>

  <% if @user.speaker_offerings.empty? %>
    <%= link_to "Créer mon annonce", new_speaker_offering_path, class: "btn btn-success" %>
  <% end %>

</div>
